---
title: "Plants 2019"
slug: plants-2019
date: '2019-01-26'
---

This page is here to help me keep track of the seeds I have sown and when I need to harvest them.  I've added some conditional formatting into the code, so that when the date is equal to or exceeds today's date, the cells will be highlighted yellow.  I'm not sure if this will work in a static website, because the value for today is taken from R, rather than the website.  We'll have to see if it works, so I will be testing it wil some fake harvest dates.

```{r echo=FALSE, message=FALSE, warning=FALSE }
library(lubridate)
library(DT)
library(tidyverse)

plants=read.csv("C:/Users/Emma/Documents/blogdown/garden/plants_2019.csv", header=T)

plants$Date_Sown=as.Date(plants$Date_Sown,format = "%d/%m/%Y")
#plants$Date_Sown=as.Date(format(plants$Date_Sown, format = "%d/%m/%Y"))

plants=plants%>%
  mutate(harvest_date=ymd(Date_Sown+days(Days_to_havest)))


plants2=plants%>%
  mutate(ready=case_when(harvest_date >= today() ~ "Not yet", TRUE~"Harvest"))

names(plants2)=c("Vegetable", "Variety","Date sown", "Days to harvest","Harvest day","Ready")
    
datatable(plants2, rownames=FALSE,options = list(
  pageLength = 10, autoWidth = TRUE
)) %>% formatStyle("Ready",
  backgroundColor = styleEqual(c("Not yet", "Harvest"), c('white', 'yellow'))
)


```


### Testing Zone

Test to see if highlight works

```{r}

today="2019-01-16"
today=ymd(today)

#Make dataframe
veg=c("Onions", "Garlic", "Asparagus")
sown=c(today)
harv=(today()+hours(18)+minutes(12))
h2=today-years(1)
harvest=c(harv,harv,h2)
plants_1=data.frame(veg,sown,harvest)
names(plants_1)=c("Vegetable", "Date_Sown", "Harvest_Date")

str(plants_1)



#library(DT)
plants_2=plants_1%>%
  mutate(ready=case_when(Harvest_Date >= today() ~ "Not yet", TRUE~"Harvest"))
    
datatable(plants_2) %>% formatStyle("ready",
  backgroundColor = styleEqual(c("Not yet", "Harvest"), c('white', 'yellow'))
)
```